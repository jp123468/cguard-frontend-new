# Cambios y Avances - Frontend

## ğŸš€ AutenticaciÃ³n
- **AuthContext**
  - `signIn`: guarda el token y usuario solo si el backend responde OK; si recibe `auth.emailNotVerified`, no autentica y muestra notificaciÃ³n.
  - `signUp`: ya **no inicia sesiÃ³n** tras el registro; muestra toast de Ã©xito y redirige a `/login`.
  - `signOut`: limpia token y usuario.
  - `getProfile`: usado en el arranque para hidratar sesiÃ³n si existe token en `localStorage`.

- **AuthService**
  - `signIn`: realiza `POST /auth/sign-in` y maneja casos de verificaciÃ³n pendiente.
  - `signUp`: realiza `POST /auth/sign-up` sin iniciar sesiÃ³n automÃ¡ticamente.
  - `getProfile`: obtiene datos de usuario desde `GET /auth/me`.
  - `sendPasswordResetEmail`: llama a `POST /auth/send-password-reset-email`.
  - `signOut`: realiza `POST /auth/sign-out`.

---

## ğŸ§© Pantallas y Componentes

### ğŸ”‘ Login
- ImplementaciÃ³n robusta con validaciÃ³n de credenciales.
- Muestra error si el usuario no estÃ¡ verificado (`auth.emailNotVerified`).
- Redirige al dashboard solo si el usuario estÃ¡ verificado.

### ğŸ“ Register
- Completa registro con `AuthService.signUp`.
- No inicia sesiÃ³n automÃ¡ticamente.
- Muestra toast: â€œRegistro exitoso, revisa tu correo para verificar tu cuentaâ€.
- Redirige a `/login` tras el registro.

### ğŸ” ForgotPassword
- Formulario funcional con `sonner`.
- EnvÃ­o de enlace de recuperaciÃ³n a `/auth/send-password-reset-email`.

### ğŸ‘¤ Header
- Integra `useAuth` para mostrar nombre y correo del usuario.
- BotÃ³n de cierre de sesiÃ³n con notificaciÃ³n de Ã©xito.
- MenÃº de usuario mejorado con opciones de perfil, idioma, soporte, API, descargas, etc.

### âš™ï¸ AccountPage
- Carga y ediciÃ³n de perfil (`GET /auth/me`, `PUT /auth/profile`).
- Cambio de contraseÃ±a (`PUT /auth/change-password`).
- EnvÃ­o manual de correo de verificaciÃ³n (`POST /auth/send-email-address-verification-email`).
- DetecciÃ³n automÃ¡tica de zona horaria.

---

## ğŸ”„ Contrato de API Esperado
| Endpoint | MÃ©todo | DescripciÃ³n |
|-----------|--------|--------------|
| `/auth/sign-in` | POST | Iniciar sesiÃ³n |
| `/auth/sign-up` | POST | Registro de nuevo usuario |
| `/auth/me` | GET | Obtener perfil actual |
| `/auth/profile` | PUT | Actualizar perfil |
| `/auth/change-password` | PUT | Cambiar contraseÃ±a |
| `/auth/send-password-reset-email` | POST | Enviar enlace de recuperaciÃ³n |
| `/auth/send-email-address-verification-email` | POST | Enviar correo de verificaciÃ³n |

---

## ğŸ§ª Pruebas rÃ¡pidas
1. **Registro:** Crea cuenta â†’ toast â€œverifica tu correoâ€ â†’ redirige a `/login`.
2. **Login no verificado:** Muestra toast y bloquea acceso.
3. **Login verificado:** Ingresa correctamente.
4. **Editar perfil:** Cambia datos y muestra toast.
5. **OlvidÃ© contraseÃ±a:** EnvÃ­a enlace correctamente.

---

## âœ… Resultado
- Flujo completo de autenticaciÃ³n implementado.
- VerificaciÃ³n por correo integrada.
- Sistema de notificaciones coherente.
- Mantenimiento de sesiÃ³n estable con `AuthContext`.
